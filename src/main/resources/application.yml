# GameIQ Application Configuration
server:
  port: 8080
  servlet:
    context-path: /api/v1

spring:
  application:
    name: gameiq-api
  
  datasource:
    url: jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:athlete_performance_db}
    username: ${DB_USER:athlete_user}
    password: ${DB_PASSWORD:dev_password_2024}
    driver-class-name: org.postgresql.Driver
    
  jpa:
    hibernate:
      ddl-auto: none
    show-sql: false
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    properties:
      hibernate:
        format_sql: true
        jdbc:
          time_zone: UTC
          
  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true

gameiq:
  jwt:
    secret: ${JWT_SECRET:gameiq-super-secret-key-change-in-production-please}
    expiration: ${JWT_EXPIRATION:86400}
    refresh-expiration: ${JWT_REFRESH_EXPIRATION:604800}
    
  claude:
    api-key: ${CLAUDE_API_KEY:your-claude-api-key}
    base-url: ${CLAUDE_BASE_URL:https://api.anthropic.com}
    model: ${CLAUDE_MODEL:claude-sonnet-4-20250514}
    max-tokens: ${CLAUDE_MAX_TOKENS:1000}
    
  subscriptions:
    basic-tier:
      price-monthly: 11.99
    premium-tier:
      price-monthly: 16.99
      
  social:
    facebook:
      app-id: ${FACEBOOK_APP_ID:your-facebook-app-id}
      app-secret: ${FACEBOOK_APP_SECRET:your-facebook-app-secret}
    share-base-url: ${SHARE_BASE_URL:https://gameiq.app/share}
    
  rate-limiting:
    claude-requests-per-hour: ${CLAUDE_RATE_LIMIT:100}
    quiz-sessions-per-hour: ${QUIZ_RATE_LIMIT:20}
    
  cors:
    allowed-origins:
      - http://localhost:19000
      - http://localhost:3000
      - http://localhost:8081
      - https://gameiq.app
      - https://www.gameiq.app

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: when-authorized
  metrics:
    tags:
      application: gameiq
      
logging:
  level:
    com.gameiq: DEBUG
    org.springframework.security: INFO
    org.hibernate.SQL: INFO
  pattern:
    console: "%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"
    file: "%d{ISO8601} [%thread] %-5level %logger{36} - %msg%n"

---
# Development Profile (THE WORKING CONFIG)
spring:
  config:
    activate:
      on-profile: dev
      
  datasource:
    url: jdbc:postgresql://postgres:5432/${DB_NAME:gameiq_db}
    username: ${DB_USER:gameiq_user}
    password: ${DB_PASSWORD:gameiq_dev_pass}
    
  flyway:
    enabled: true
  jpa:
    show-sql: true
    hibernate:
      ddl-auto: none
      
  # DISABLE SPRING SECURITY FOR DEVELOPMENT
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration
      - org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration
      - org.springframework.boot.actuate.autoconfigure.security.servlet.ManagementWebSecurityAutoConfiguration
      
  devtools:
    restart:
      enabled: true
    livereload:
      enabled: true
      
logging:
  level:
    com.gameiq: DEBUG
    org.springframework.web: DEBUG
    
server:
  error:
    include-stacktrace: always
    include-message: always

---    
# Production Profile
spring:
  config:
    activate:
      on-profile: prod
      
  jpa:
    show-sql: false
    
logging:
  level:
    com.gameiq: INFO
    org.springframework.web: WARN
    
server:
  error:
    include-stacktrace: never
    include-message: never
